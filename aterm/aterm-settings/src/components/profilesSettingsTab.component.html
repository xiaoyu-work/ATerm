
<h3 class="mb-3" translate>Profiles</h3>
<ul class="nav-tabs" ngbNav #nav="ngbNav">
  <li ngbNavItem><a ngbNavLink translate>Profiles</a>
    <ng-template ngbNavContent>
      <div class="form-line">
        <div class="header">
          <div class="title" translate>Default profile for new tabs</div>
        </div>
        <select class="form-control" [(ngModel)]="config.store.terminal.profile" (ngModelChange)="config.save()">
          <optgroup [label]="&quot;Custom Profiles&quot;|translate" *ngIf="customProfiles?.length &gt; 0">
            <option *ngFor="let profile of customProfiles" [ngValue]="profile.id">{{profile.name}}</option>
          </optgroup>
          <optgroup [label]="&quot;Built-in Profiles&quot;|translate">
            <option *ngFor="let profile of builtinProfiles" [ngValue]="profile.id">{{profile.name}}</option>
          </optgroup>
        </select>
      </div>
      <div class="d-flex mb-3">
        <div class="input-group">
          <div class="input-group-text"><i class="fas fa-fw fa-search"></i></div>
          <input class="form-control" type="search" [placeholder]="&quot;Filter&quot;|translate" [(ngModel)]="filter">
        </div>
        <div class="d-inline-block flex-shrink-0 ms-3" ngbDropdown>
          <button class="btn btn-primary" ngbDropdownToggle><i class="fas fa-fw fa-plus"></i><span translate>New</span></button>
          <div ngbDropdownMenu>
            <button ngbDropdownItem (click)="newProfile()"><i class="fas fa-fw fa-plus"></i><span translate>New profile</span></button>
            <button ngbDropdownItem (click)="newProfileGroup()"><i class="fas fa-fw fa-plus"></i><span translate>New profile Group</span></button>
          </div>
        </div>
      </div>
      <div class="list-group mt-3 mb-3">
        <ng-container *ngFor="let group of profileGroups">
          <ng-container *ngIf="isGroupVisible(group)">
            <div class="list-group-item list-group-item-action d-flex align-items-center" (click)="toggleGroupCollapse(group)">
              <div class="fa fa-fw fa-chevron-right" *ngIf="group.collapsed &amp;&amp; group.profiles?.length &gt; 0"></div>
              <div class="fa fa-fw fa-chevron-down" *ngIf="!group.collapsed &amp;&amp; group.profiles?.length &gt; 0"></div><span class="ms-3 me-auto">{{group.name || ("Ungrouped"|translate)}}</span>
              <button class="btn btn-sm btn-link hover-reveal ms-2" *ngIf="group.editable &amp;&amp; group.name" (click)="$event.stopPropagation(); editProfileGroup(group)"><i class="fas fa-pencil-alt"></i></button>
              <button class="btn btn-sm btn-link hover-reveal ms-2" *ngIf="group.editable &amp;&amp; group.name" (click)="$event.stopPropagation(); deleteProfileGroup(group)"><i class="fas fa-trash-alt"></i></button>
            </div>
            <ng-container *ngIf="!group.collapsed">
              <ng-container *ngFor="let profile of group.profiles">
                <div class="list-group-item ps-5 d-flex align-items-center" *ngIf="isProfileVisible(profile)" [class.list-group-item-action]="!profile.isBuiltin" (click)="profile.isBuiltin ? null : editProfile(profile)">
                  <profile-icon [icon]="profile.icon" [color]="profile.color"></profile-icon>
                  <div class="no-wrap">{{profile.name}}</div>
                  <div class="text-muted no-wrap ms-2">{{getDescription(profile)}}</div>
                  <div class="me-auto"></div>
                  <button class="btn btn-link hover-reveal ms-1" *ngIf="!profile.isTemplate" (click)="$event.stopPropagation(); launchProfile(profile)"><i class="fas fa-play"></i></button>
                  <div class="ms-1 hover-reveal" ngbDropdown placement="bottom-right top-right auto">
                    <button class="btn btn-link ms-1" ngbDropdownToggle (click)="$event.stopPropagation()"><i class="fas fa-fw fa-ellipsis-vertical"></i></button>
                    <div ngbDropdownMenu>
                      <button class="dropdown-item" ngbDropdownItem (click)="$event.stopPropagation(); newProfile(profile)"><i class="fas fa-fw fa-copy"></i><span translate>Duplicate</span></button>
                      <button class="dropdown-item" ngbDropdownItem *ngIf="profile.id &amp;&amp; !isProfileBlacklisted(profile)" (click)="$event.stopPropagation(); blacklistProfile(profile)"><i class="fas fa-fw fa-eye-slash"></i><span translate>Hide</span></button>
                      <button class="dropdown-item" ngbDropdownItem *ngIf="profile.id &amp;&amp; isProfileBlacklisted(profile)" (click)="$event.stopPropagation(); unblacklistProfile(profile)"><i class="fas fa-fw fa-eye"></i><span translate>Show</span></button>
                      <button class="dropdown-item" *ngIf="!profile.isBuiltin" (click)="$event.stopPropagation(); deleteProfile(profile)"><i class="fas fa-fw fa-trash-alt"></i><span translate>Delete</span></button>
                    </div>
                  </div>
                  <div class="ms-1 badge text-bg-{{getTypeColorClass(profile)}}">{{getTypeLabel(profile)}}</div>
                  <div class="ms-1 text-danger fas fa-eye-slash" *ngIf="isProfileBlacklisted(profile)"></div>
                </div>
              </ng-container>
            </ng-container>
          </ng-container>
        </ng-container>
      </div>
    </ng-template>
  </li>
  <li ngbNavItem><a ngbNavLink translate>Advanced</a>
    <ng-template ngbNavContent>
      <div class="form-line content-box" *ngIf="config.store.profiles.length &gt; 0">
        <div class="header">
          <div class="title" translate>Show recent profiles in selector</div>
          <div class="description" translate>Set to 0 to disable recent profiles</div>
        </div>
        <input class="form-control" type="number" min="0" step="1" [(ngModel)]="config.store.terminal.showRecentProfiles" (ngModelChange)="config.save()">
      </div>
      <div class="form-line content-box" *ngIf="config.store.profiles.length &gt; 0">
        <div class="header">
          <div class="title" translate>Show built-in profiles in selector</div>
          <div class="description" translate>If disabled, only custom profiles will show up in the profile selector</div>
        </div>
        <toggle [(ngModel)]="config.store.terminal.showBuiltinProfiles" (ngModelChange)="config.save()"></toggle>
      </div>
      <div class="form-line content-box" *ngIf="hostApp.platform === Platform.Windows">
        <div class="header">
          <div class="title" translate>Terminal identification</div>
          <div class="description" translate>How Aterm presents itself through environment vars</div>
        </div>
        <select class="form-control" [(ngModel)]="config.store.terminal.identification" (ngModelChange)="config.save()">
          <option ngValue="wt" translation>Windows Terminal</option>
          <option ngValue="cygwin" translation>Cygwin</option>
        </select>
      </div>
      <div class="form-line">
        <div class="header">
          <div class="title" translate>Default "Connect to" type</div>
          <div class="description" translate>Default connection type used by quick connect feature (ex. SSH, Telnet)</div>
        </div>
        <select class="form-control" [(ngModel)]="config.store.defaultQuickConnectProvider" (ngModelChange)="config.save()">
          <option *ngFor="let provider of getQuickConnectProviders()" [ngValue]="provider.id">{{provider.name}}</option>
        </select>
      </div>
      <div class="form-line content-box">
        <div class="header">
          <div class="title" translate>Default profile settings</div>
          <div class="description" translate>These apply to all profiles of a given type</div>
        </div>
      </div>
      <div class="list-group mt-3 mb-3 content-box"><a class="list-group-item list-group-item-action d-flex align-items-center" (click)="editDefaults(provider)" *ngFor="let provider of profileProviders">{{provider.name|translate}}
          <div class="me-auto"></div>
          <button class="btn btn-link hover-reveal ms-1" (click)="$event.stopPropagation(); deleteDefaults(provider)"><i class="fas fa-trash-arrow-up"></i></button></a></div>
    </ng-template>
  </li>
</ul>
<div [ngbNavOutlet]="nav"></div>